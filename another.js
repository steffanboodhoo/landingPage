(function() {var k,n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,q={};function r(a,b){(q[a]=q[a]||[]).push(b);var c=n;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))}
function t(){t=function(){};if(!n.Symbol){n.Symbol=aa;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var e=[],f=0,g=d.length;f<g;f++){var h;a:if(h=d[f],14>h.length)h=!1;else{for(var m=0;14>m;m++)if(h[m]!="jscomp_symbol_"[m]){h=!1;break a}h=!0}h?a.push(d[f]):e.push(d[f])}return e}};r("Object.keys",b);r("Object.getOwnPropertyNames",b);r("Object.getOwnPropertySymbols",function(c){return function(d){b.hb=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}}var ba=0;
function aa(a){return"jscomp_symbol_"+a+ba++}function u(){t();n.Symbol.iterator||(n.Symbol.iterator=n.Symbol("iterator"));u=function(){}}function v(a){u();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}
function w(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function x(a,b){if(b){for(var c=n,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];b=b(e);if(b!=e){a=q[a]||[];for(e=0;e<a.length;e++)b=a[e](b);ca(c,d,{configurable:!0,writable:!0,value:b})}}}x("Array.prototype.fill",function(a){return a?a:function(a,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
function da(a,b){u();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}x("Array.prototype.keys",function(a){return a?a:function(){return da(this,function(a){return a})}});function y(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
x("Object.assign",function(a){return a?a:function(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var f in e)y(e,f)&&(a[f]=e[f])}return a}});
x("WeakMap",function(a){function b(a){this.da=(h+=Math.random()+1).toString();if(a){t();u();a=v(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){if(!y(a,f)){var b={};b[f]=g;ca(a,f,{value:b})}}function d(a){return function(b){var c=a(b);if(y(b,f)&&y(b[f],f)&&b[f][f]===g)for(b=0;b<c.length;b++)if(c[b]==f){c.splice(b,1);break}return c}}function e(a){return function(b){c(b);return a(b)}}if(function(){if(!a||!Object.seal)return!1;var b=Object.seal({}),c=Object.seal({}),d=new a([[b,
2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}())return a;var f="$jscomp_hidden_"+Math.random().toString().substring(2),g={};r("Object.getOwnPropertyNames",d);r("Object.keys",d);r("Reflect.enumerate",d);r("Reflect.ownKeys",d);r("Object.freeze",e);r("Object.preventExtensions",e);r("Object.seal",e);var h=0;b.prototype.set=function(a,b){c(a);if(!y(a,f))throw Error("WeakMap key fail: "+a);a[f][this.da]=b;return this};b.prototype.get=function(a){return y(a,
f)?a[f][this.da]:void 0};b.prototype.has=function(a){return y(a,f)&&y(a[f],this.da)};b.prototype.delete=function(a){return y(a,f)&&y(a[f],this.da)?delete a[f][this.da]:!1};return b});
x("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.w,d={next:function(){if(c){for(;c.head!=a.w;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d}function d(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?f.has(b)?c=f.get(b):(c=""+ ++g,f.set(b,c)):c="p_"+b;var d=a.ba[c];if(d&&y(a.ba,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==
e.key||b===e.key)return{id:c,list:d,index:a,g:e}}return{id:c,list:d,index:-1,g:void 0}}function e(a){this.ba={};this.w=b();this.size=0;if(a){a=v(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(v([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;
e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(f){return!1}}())return a;t();u();var f=new WeakMap;e.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.ba[c.id]=[]);c.g?c.g.value=b:(c.g={next:this.w,previous:this.w.previous,head:this.w,key:a,value:b},c.list.push(c.g),this.w.previous.next=c.g,this.w.previous=c.g,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.g&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.ba[a.id],
a.g.previous.next=a.g.next,a.g.next.previous=a.g.previous,a.g.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.ba={};this.w=this.w.previous=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).g};e.prototype.get=function(a){return(a=d(this,a).g)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};
e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});x("Array.prototype.find",function(a){return a?a:function(a,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++){var g=d[f];if(a.call(c,g,f,d)){a=g;break a}}a=void 0}return a}});var fa=new ea;function ea(){}k=ea.prototype;k.setInterval=function(a,b){return window.setInterval(a,b)};k.clearInterval=function(a){window.clearInterval(a)};k.setTimeout=function(a,b){return window.setTimeout(a,b)};k.clearTimeout=function(a){window.clearTimeout(a)};k.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)};k.cancelAnimationFrame=function(a){window.cancelAnimationFrame(a)};function z(a){this.La=a.fallback;this.Ga=a.localePrecedence;this.wa={};this.ha=a.messages;this.Na=this.Ga[0];this.Oa=!!a.returnKeys}z.prototype.format=function(a,b){if(this.Oa)return[].join.call(arguments,":");var c=ha(this,a);return c.format.call(c,[].slice.call(arguments,1))};
function ha(a,b){if(a.wa.hasOwnProperty(b))return a.wa[b];var c=a.Na,d;a.Ga.some(function(c){d=a.ha[c]&&a.ha[c][b];return void 0!==d});d||(c=a.La,d=a.ha[c]&&a.ha[c][b]);if(!d)throw Error("Unknown message: "+b);c=new IntlMessageFormat(d,c,ia);return a.wa[b]=c}var ia={number:{currency:{style:"currency",currency:"USD"},integer:{maximumFractionDigits:0},fixed2:{minimumFractionDigits:2,maximumFractionDigits:2}}};function ja(){this.R=window.cmsg;this.l=null}function ka(a){z.apply(this,arguments)}w(ka,z);function la(a,b){if(!a)throw new TypeError("Cannot adopt constructor "+a);if("object"!==typeof b)throw new TypeError("Cannot adopt non-object value "+b);if(null===b)throw new TypeError("Cannot adopt null value");return Object.create(a.prototype,ma(b))}function ma(a){var b=Object.create(null);Object.keys(a).forEach(function(c){b[c]={value:a[c],writable:!0,enumerable:!0,configurable:!0}});return b};function na(a){a=void 0===a?{}:a;this.version=a.version||0;this.sizes=a.sizes||{}}na.prototype.getVersion=function(){return this.version};function oa(a){a=void 0===a?{}:a;this.size=a.size||0;this.width=a.width||0;this.height=a.height||0;this.url=a.url||""}var pa={version:0,sizes:{50:{size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"},200:{size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"}}},A;
if(pa){A=la(na,pa);var C;var D=A.sizes,qa={};if(D){for(var ra in D){var sa=ra,ta,ua=D[ra];ta=ua?la(oa,ua):null;qa[sa]=ta}C=qa}else C=null;A.sizes=C};function E(a){this.j=a.j;this.H=a.H;this.K=a.K;this.J=a.J;this.N=a.N;this.Da=null;this.ia=[];this.ready=!1;this.X=a.X;this.D=a.D;this.ga=a.ga}
function va(a,b){b=Object.assign({},b);a.Da&&(b.design=a.Da);b.experience=a.X;for(var c in a.D)a.D.hasOwnProperty(c)&&(b["Experiment:"+c]=a.D[c]);a.H&&(b.brand=a.H);null!=a.K&&(b.personal=a.K);null!=a.J&&(b.cohort=a.J);a.N&&(b.tier=a.N);try{var d=window.crypto||window.msCrypto,e=new Uint8Array(16);d.getRandomValues(e);b.insert_id=btoa(String.fromCharCode.apply(null,e))}catch(f){}return b}k=E.prototype;k.track=function(){};k.identify=function(a){this.j=a};k.alias=function(){};k.set=function(){};
k.union=function(){};function F(a,b,c){var d={};d.type=b;d.section="header";d.subsection="login_bar";d.location="logged_out_homepage";c&&Object.assign(d,c);a.track("button_click",d)};function G(a){E.call(this,{X:a.X,D:a.D,j:a.j,H:a.H,K:a.K,J:a.J,N:a.N,ga:function(a,c,d){window.console.log("Google track: ",a,c,d)},ab:function(a){window.console.log("Facebook track pixelId: ",a)},gb:function(a){window.console.log("Twitter trackPid: ",a)}})}w(G,E);k=G.prototype;k.track=function(a,b){window.console.log("analytics:track",this.j,a,va(this,b))};k.identify=function(a,b,c,d){this.j=a;window.console.log("analytics:identify",a,b,c,d)};
k.alias=function(a){window.console.log("analytics:alias",this.j,a);this.j=a};k.set=function(a,b){window.console.log("analytics:set",this.j,a);b&&window.setTimeout(b,0)};k.union=function(a){window.console.log("analytics:union",this.j,a)};var H=!1;
function I(a){function b(b){for(this.ready=!0;this.ia&&0<this.ia.length;)this.ia.shift()();this.ia=null;if(b&&a.j){var c=(new UAParser).getResult();b=c.browser.name;var f=c.browser.version,g=c.device.type,c=c.os.name;g||"Android"!=c&&"iOS"!=c||(g="mobile");this.set({"Most recent browser":b+" "+f,timezone:(new Date).getTimezoneOffset()/-60});this.union({"Operating Systems":[c],Browsers:[b],Devices:[g]})}}E.call(this,a);var c=window.analytics;c&&(c.ready(b.bind(this,!H)),H||(H=!0,c.load(a.Ra),c.page()))}
w(I,E);k=I.prototype;k.track=function(a,b){window.analytics&&window.analytics.track(a,va(this,b))};k.identify=function(a,b,c,d){"object"==typeof b&&(b={id:b.id,username:b.username,personalBrand:b.eb,displayName:b.displayName,largeAvatarUrl:b.bb,roles:b.fb,onboarding:b.cb});window.analytics&&window.analytics.identify(a,b,c,d)};k.alias=function(a){window.analytics&&window.analytics.alias(a)};k.set=function(a,b){window.analytics&&window.analytics.identify(a,b)};k.union=function(){};function wa(){var a=window.analyticsConfig,b=window.ga,c=a.user,d=a.brand,e=a.personal,f=a.cohort,g=a.tier,h=String(a.experience),m=a.experiments,p=a.impl;switch(p){case "console":a=new G({X:h,D:m,j:c,H:d,K:e,J:f,N:g});break;case "segment":a=new I({Ra:a.segmentWriteKey,X:h,D:m,j:c,H:d,K:e,J:f,N:g,ga:b});break;default:throw Error("Cant find analytics implementation "+p);}c&&a.identify(c);return a};function J(){this.xhr=null}J.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};J.prototype.finish=function(){this.xhr=null};function K(a){this.za=a&&a.analyticsContext||null;this.oa=a&&a.authToken||null;this.ra=a&&a.authzToken||null;this.Aa=a&&a.brandRestriction||null;this.Ba=a&&a.buildName||null;this.Ca=a&&a.buildSha||null;this.W=a&&a.csrfTokens||{};this.xa=a&&a.serverRoot||null;this.Pa=!!this.xa;this.Qa=this.xa?this.xa+"/_ajax":"/_ajax"}
function xa(a){var b=a.indexOf("/",1);return-1==b?a:a.substring(0,b)}K.prototype.get=function(a,b){var c=new J;this.send("GET",a,null,!0,null,c,null,b);return c};K.prototype.post=function(a,b,c,d){var e=new J;L(this,"POST",a,b,!0,0,e,c,d);return e};function ya(a,b){var c;return(new P(function(d,e){c=a.post("/google/requesttokens",b,null,function(a,b){200<=a&&300>a?d([b,a]):e([b,a])})})).cancellable().catch(P.CancellationError,function(a){c.cancel();throw a;})}
function L(a,b,c,d,e,f,g,h,m){var p=xa(c);if(p in a.W){var l=a.W[p];a.send(b,c,d,e,l,g,h,function(B,Z){418==B&&1>f?(a.W[p]==l&&delete a.W[p],L(a,b,c,d,e,f+1,g,h,m)):(m&&m(B,Z),g.finish())})}else a.send("GET","/csrf"+p,null,e,null,g,null,function(l,Z){200==l?(p in a.W||(a.W[p]=String(Z)),L(a,b,c,d,e,f,g,h,m)):(m(l,null),g.finish())})}
K.prototype.send=function(a,b,c,d,e,f,g,h){function m(){4==l.readyState&&p()}function p(){var a,b,c;try{a=l.status;var d,e;try{d=l.getResponseHeader("X-Canva-Auth")}catch(g){}try{e=l.getResponseHeader("X-Canva-Authz")}catch(g){}d&&(B.oa="!"!=d?d:null);e&&(B.ra="!"!=e?e:null);b=l.responseText}catch(g){if(g.message&&g.message.match(/c00c023f/))a=0,b="";else throw f.finish(),g;}b=b&&b.trim?b.trim():"";d=b.substring(0,20);if(0<d.length){if("'\"])}while(1);\x3c/x\x3e//"!=d){h(500,null);f.finish();return}b=
b.substring(20);try{c=JSON.parse(b)}catch(g){h(500,null);f.finish();return}}else c=null;h(a,c);f.finish()}b=this.Qa+b;var l=f.xhr=new XMLHttpRequest,B=this;l.open(a,b,d);this.Pa&&(l.withCredentials=!0);"GET"!=a&&e&&l.setRequestHeader("X-Csrf-Token",e);this.za&&l.setRequestHeader("X-Canva-Analytics",this.za);this.oa&&l.setRequestHeader("X-Canva-Auth",this.oa);this.ra&&l.setRequestHeader("X-Canva-Authz",this.ra);this.Aa&&l.setRequestHeader("X-Canva-Brand",this.Aa);this.Ba&&l.setRequestHeader("X-Canva-Build-Name",
this.Ba);this.Ca&&l.setRequestHeader("X-Canva-Build-Sha",this.Ca);null===c?a=null:"object"==typeof c&&"undefined"!==typeof Blob&&c instanceof Blob?(l.setRequestHeader("Content-Type",c.type),g&&l.upload.addEventListener("progress",g,!1),a=c):(l.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8"),a=JSON.stringify(c));d?(l.onreadystatechange=m,l.send(a)):(l.send(a),p())};function M(a,b){this.sa=a;this.namespace=void 0===b?null:b}M.prototype.setItem=function(a,b){try{return this.sa.setItem(null==this.namespace?a:this.namespace+"."+a,b),!0}catch(c){return!1}};M.prototype.getItem=function(a){return this.sa.getItem(null==this.namespace?a:this.namespace+"."+a)};M.prototype.removeItem=function(a){this.sa.removeItem(null==this.namespace?a:this.namespace+"."+a)};function N(a){this.type=a}N.prototype.required=function(a,b){b=b[a];if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};N.prototype.optional=function(a,b){b=b[a];if(null!=b&&typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
N.prototype.Ia=function(a,b){b=b[a];if(null!=b)if(Array.isArray(b))for(a=0;a<b.length;a++)this.required(String(a),b);else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var O=new N("string");function Q(a){this.type=a}Q.prototype.required=function(a,b){if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
Q.prototype.optional=function(a,b){if(null!=b){if(typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b}};Q.prototype.Ia=function(a,b){if(Array.isArray(b)){if(0==b.length)return;for(var c=0;c<b.length;c++)this.required(a+"["+String(c)+"]",b[c])}else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var R=new Q("string");function za(){}w(za,Error);function Aa(){}w(Aa,za);function Ba(){}w(Ba,za);function Ca(a,b,c,d,e,f,g,h,m){this.accessToken=a;this.email=b;this.Ea=c;this.id=d;this.Fa=e;this.name=f;this.permissions=g;this.Ha=h;this.Ja=m}Ca.prototype.ua=function(){return this.email};Ca.prototype.getName=function(){return this.name};function S(a){this.G=a.G;this.ma=a.R.ma;this.F=null}
var Da={v:function(a,b){var c=[];b.permissions.data.forEach(function(a){"granted"==a.status&&c.push(a.permission)});this.permissions=c},param:"permissions"},Ea={Sa:{v:function(a){this.accessToken=a.accessToken}},Ta:{v:function(a,b){this.email=b.email},param:"email"},Va:{v:function(a,b){this.Ea=b.first_name},param:"first_name"},Wa:{v:function(a){this.id=a.userID}},Xa:{v:function(a,b){this.Fa=b.last_name},param:"last_name"},Ya:{v:function(a,b){this.name=b.name},param:"name"},Za:Da,$a:{v:function(a,
b){this.Ha=b.picture.data.url},param:"picture.type(large)"},Ua:{v:function(a){this.Ja=(new Date).getTime()+1E3*a.expiresIn}}};S.prototype.init=function(){var a=this,b,c;b=this;return(c=window.facebookSdkPromise)?c:c=window.facebookSdkPromise=new P(function(c){window.fbAsyncInit=function(){FB.init({version:"v2.6",appId:b.ma,channelUrl:"//"+window.location.hostname+"/static/channel.html",status:!0,xfbml:!1});c(a)};Fa()})};
function Fa(){var a,b=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(a=document.createElement("script"),a.id="facebook-jssdk",a.src="//connect.facebook.com/en_US/sdk.js",b.parentNode.insertBefore(a,b))}S.prototype.na=function(a){var b=$.Deferred();this.G.post("/login/facebook",{type:"FACEBOOK",token:a.accessToken},null,function(a,d){switch(a){case 200:b.resolve(d.redirect);break;case 404:b.reject(new Ba);break;default:b.reject(new Aa)}});return b.promise()};
function Ga(a){return new P(function(b,c){a.getAuthResponse().then(function(d){a.na(d).then(b).fail(c)}).fail(c)})}function Ha(a,b){return new P(function(c,d){Ia(a,[Da]).then(function(e){e=e.permissions;var f=_.difference(b,e);a.F&&(a.F.permissions=e);f.length?d():c()}).fail(d)})}
function Ja(a){return new P(function(b,c){var d;d=Object.keys(Ea).map(function(a){return Ea[a]});Ia(a,d).then(function(d){d.email?(a.F=new Ca(d.accessToken,d.email,d.Ea,d.id,d.Fa,d.name,d.permissions,d.Ha,d.Ja),b(a.F)):c("EMAIL_NOT_VERIFIED")}).fail(c)})}
function Ia(a,b){var c=$.Deferred();a.getAuthResponse().then(function(a){for(var e=[],f=0;f<b.length;f++){var g=b[f];g.param&&e.push(g.param)}e=e.join(",");FB.api("/me?return_ssl_resources\x3d1\x26fields\x3d"+encodeURIComponent(e),function(e){if("error"in e)c.reject("FB_API_ERROR");else{for(var f={},g=0;g<b.length;g++)b[g].v.call(f,a,e);c.resolve(f)}})}).fail(function(b){a.F=null;c.reject(b)});return c.promise()}
S.prototype.getAuthResponse=function(){var a=$.Deferred();FB.getAuthResponse()?a.resolve(FB.getAuthResponse()):FB.getLoginStatus(function(b){"connected"==b.status?a.resolve(b.authResponse):a.reject("UNAUTHORIZED")});return a.promise()};
function Ka(a){var b=["email","public_profile"];return new P(function(c,d){function e(b){a.F=null;d(b)}function f(f){f.authResponse&&f.status?Ha(a,b).then(c).catch(e):d("FB_API_ERROR")}var g=_.difference(b,a.F?a.F.permissions:[]);0<g.length?FB.login(f,{scope:g.join(",")}):Ha(a,b).then(c).catch(e)})}function La(){this.ma=O.required("appId",window.facebookConfig)};function T(){}w(T,Error);function Ma(a,b){if(b instanceof U)return a.format("authGoogleSignInFailed");if(b instanceof V)return a.format("authGoogleFailedToFetchUserInformation");if(b instanceof Na)return a.format("authTrySigningUpFirst");if(b instanceof Oa)return a.format("authGoogleSignInFailed");throw Error("unrecognised GoogleServiceError");}function U(){}w(U,T);function V(){}w(V,T);function Na(){}w(Na,T);function Oa(){}w(Oa,T);function Pa(a,b,c){this.name=a||null;this.picture=b||null;this.email=c||null}Pa.prototype.getName=function(){return this.name};Pa.prototype.ua=function(){return this.email};function W(a){this.accessToken=a.accessToken||null;this.i=a.i||null;this.u=a.u;this.o=a.o;this.Z=a.Z;this.la=null;if(this.accessToken){var b=this;this.fa().then(function(){gapi.auth.setToken({accessToken:b.accessToken})})}if(this.Z&&!a.i)throw Error("Client cannot be configured with offline and not have a redirectUri");this.fa().then(this.qa.bind(this,{ya:!1}))}W.prototype.load=function(){return this.fa()};
function Qa(a){function b(){$.getJSON("https://www.googleapis.com/oauth2/v1/userinfo?alt\x3djson\x26access_token\x3d"+encodeURIComponent(f.accessToken)).done(d).fail(c);return e.promise()}function c(){e.reject(new V)}function d(a){f.la=a?$.extend(new Pa,{name:a.name,picture:a.picture,email:a.email}):null;e.resolve(f.la)}if(0>a.o.indexOf("profile"))throw Error("API was not configured with USER_PROFILE_READ scope");var e=$.Deferred(),f=a;return a.la?e.resolve(a.la).promise():a.fa().then(a.qa.bind(a,
{ya:!0})).then(b)}
(function(){function a(a){var c;try{c=JSON.parse(a.data)}catch(d){return}c.f&&null===document.getElementById(c.f)&&a.stopImmediatePropagation()}window.googleApiLoaderDeferred=window.googleApiLoaderDeferred||$.Deferred();window.googleApiLoaderScript=window.googleApiLoaderScript||null;W.prototype.Ka=function(){var a,c=window.googleApiLoaderDeferred;a=$("\x3cscript\x3e");a[0].onerror=c.reject.bind(c);a.attr({src:"https://apis.google.com/js/client.js?onload\x3dGoogleApiOnGapiLoad",type:"text/javascript"});a.appendTo("head");
return a};W.prototype.fa=function(){window.googleApiLoaderScript||(window.addEventListener("message",a),window.googleApiLoaderScript=this.Ka());return window.googleApiLoaderDeferred.promise()};window.GoogleApiOnGapiLoad=function(){window.googleApiLoaderDeferred.resolve()}})();W.prototype.pa=function(a){return this.qa({ya:!0,ta:a&&a.ta})};
W.prototype.qa=function(a){function b(a){var b=a&&a.access_token;a=a&&a.code;b?(d.accessToken=b,c.resolve(d.accessToken)):a?c.resolve(a):c.reject(new Oa)}var c=jQuery.Deferred(),d=this;this.accessToken?c.resolve(this.accessToken):(a={client_id:this.u,immediate:!a.ya,approval_prompt:a.ta?"force":"auto",access_type:this.Z?"offline":"online",response_type:this.Z?"code":"token",scope:this.o},this.Z&&(a=$.extend({redirect_uri:this.i},a)),gapi.auth.authorize(a,b));return c.promise()};function Ra(a){this.u=a.R.u;this.i=a.R.i;this.o=["profile","email"];this.google=Sa(this);this.G=a.G;this.O=a.O;this.Ma=3;this.ea=null;this.aa=this.aa.bind(this);this.ja=this.ja.bind(this)}function Sa(a,b){a.google=new W({u:a.u,i:a.i,o:a.o,Z:!0,accessToken:b});return a.google}k=Ra.prototype;k.load=function(){return this.google.load()};
k.pa=function(){var a=this;this.ea=$.Deferred();window.GoogleAuthMessageCallback&&window.removeEventListener("message",window.GoogleAuthMessageCallback);window.addEventListener("message",this.aa,!1);window.GoogleAuthMessageCallback=this.aa;window.canvaGoogleAuthReceiveMessage=this.ja;this.google.pa({ta:!Ta(this)}).then(function(b){return Ua(a,b)}).fail(function(b){return X(a,b)});return this.ea.promise()};function X(a,b){a.ea.reject(b);Va(a)}
function Va(a){window.removeEventListener("message",a.aa);window.canvaGoogleAuthReceiveMessage===a.aa&&(window.canvaGoogleAuthReceiveMessage=null)}k.aa=function(a){a.origin===window.location.origin&&this.ja(a.data)};k.ja=function(a){var b;try{b=JSON.parse(a)}catch(c){return}a=b.code;b.error?X(this,new U):a&&Ua(this,a)};
function Ua(a,b){function c(a){Qa(Sa(f,a.accessToken)).then(function(b){var c=a.C||Ta(f);if(!c)throw new T;f.O&&f.O.setItem("GoogleAuthRefreshTokenKey",c);var d=f;d.ea.resolve(new Wa({email:b.ua(),C:c,accessToken:a.accessToken}));Va(d)}).fail(function(){return X(f,new V)})}function d(a){429==a&&h<f.Ma?setTimeout(function(){e(g).spread(c,d)},1E3):X(f,new U)}function e(a){h++;return ya(f.G,Xa(a)).spread(Ya)}var f=a,g=new Za({code:b,va:"authorization_code",i:f.i,o:f.o}),h=0;e(g).then(c,d)}
k.na=function(a){var b=$.Deferred();this.G.post("/login/google",$a(a),null,function(a,d){switch(a){case 200:b.resolve(new ab({redirect:O.required("redirect",d)}));break;case 404:b.reject(new Na);break;default:b.reject(new U)}});return b.promise()};function Ta(a){return a.O&&a.O.getItem("GoogleAuthRefreshTokenKey")}function bb(a){this.u=a.u;this.i=a.i}function cb(){var a=window.googleConfig;return new bb({u:O.required("clientId",a),i:O.required("redirectUri",a)})}
function Za(a){this.code=a.code;this.va=a.va;this.i=a.i;this.o=a.o}function Xa(a){var b=R.required("code",a.code),c=R.required("grantType",a.va),d=R.required("redirectUri",a.i);a=R.Ia("scopes",a.o);return{code:b,grantType:c,redirectUri:d,scopes:a}}function db(a){this.accessToken=a.accessToken;this.C=a.C}function Ya(a){var b=O.required("accessToken",a);a=O.optional("refreshToken",a);return new db({accessToken:b,C:a})}function Wa(a){this.email=a.email;this.C=a.C;this.accessToken=a.accessToken}
function $a(a){return{type:"GOOGLE",accessToken:R.required("accessToken",a.accessToken),refreshToken:R.required("refreshToken",a.C)}}function ab(a){this.redirect=a.redirect};function eb(a){var b={};Backbone.View.call(this,{el:a.element||".js-dropdown",events:(b["click .js-dropdown__toggle"]=function(a){a.preventDefault();a=$(a.currentTarget).siblings(".js-dropdown__content");a.toggleClass("dropdown__content--expanded");a.is(".js-dropdown__content--expanded")||a.removeClass("js-dropdown__content--fixed")},b["mouseenter .js-dropdown__toggle--hover"]=function(a){a=$(a.currentTarget).siblings(".js-dropdown__content");$(".js-dropdown__content--fixed").not(a).removeClass("js-dropdown__content--fixed");
fb($(".js-dropdown__content").not(a));gb(this,a);a.addClass("dropdown__content--expanded")},b["mouseleave .js-dropdown__toggle--hover"]=function(a){a=$(a.currentTarget).siblings(".js-dropdown__content");hb(this,a)},b["mouseleave .js-dropdown__content"]=function(a){a=$(a.currentTarget);hb(this,a)},b["mouseenter .js-dropdown__content"]=function(a){a=$(a.currentTarget);gb(this,a)},b["click .js-dropdown__content"]=function(a){a=$(a.currentTarget);a.is(".js-dropdown__content--fixOnClick")&&a.addClass("js-dropdown__content--fixed")},
b)});this.ka=a.ka}w(eb,Backbone.View);eb.prototype.start=function(){$(document).click(function(a){a=$(a.target);a.closest(".js-dropdown").length||a.is(".js-dropdown")||$(".js-dropdown__content").removeClass("dropdown__content--expanded")})};function hb(a,b){a=a.ka.setTimeout(function(){fb(b)},500);b.data("dd-ml-to-id",a)}function gb(a,b){var c;(c=b.data("dd-ml-to-id"))&&a.ka.clearTimeout(c)}function fb(a){a.is(".js-dropdown__content--fixed")||a.removeClass("dropdown__content--expanded")};function ib(a){var b={};Backbone.View.call(this,{el:a.el,events:(b["click .js-socialAuth__facebookButton"]=function(a){jb(this,a)},b["click .js-socialAuth__googleButton"]=function(a){kb(this,a)},b)});this.Y=a.Y;this.ca=a.ca;this.l=a.l;this.mode=a.mode}w(ib,Backbone.View);
ib.prototype.start=function(){var a,b;a=this.$(".js-socialAuth__facebookButton");b=this.$(".js-socialAuth__googleButton");a.prop("disabled",!0);this.Y.init().then(function(){return a.prop("disabled",!1)});b.prop("disabled",!0);this.ca.load().done(function(){return b.prop("disabled",!1)})};function lb(a){a.hasClass("buttonSpinner")||(a.addClass("buttonSpinner"),a.append('\x3cdiv class\x3d"spinner"/\x3e'))}
function mb(a){a.hasClass("buttonSpinner")&&(a.find(".spinner").remove(),a.removeClass("buttonSpinner"))}function jb(a,b){nb(a);lb($(b.currentTarget));Ka(a.Y).then(function(){return ob(a)}).catch(function(){Y(a,a.l.format("signupLoginFacebookPermissionsFailure"))})}function ob(a){Ja(a.Y).then(function(b){return pb(a,b)}).catch(function(b){"EMAIL_NOT_VERIFIED"===b?Y(a,a.l.format("signupLoginUnverifiedFacebookEmailAddress")):Y(a,a.l.format("signupLoginFacebookSignInFailure"))})}
function pb(a,b){Ga(a.Y).then(function(a){var b=(new UAParser).getResult().browser;"Safari"!==b.name||"8"!==b.major||"DESIGN_BUTTON"!==window.analyticsConfig.experience?window.location.href=window._loginRedirect||a:window.location.reload()}).catch(function(c){if(a.mode===qb){c=a.$el.data("csrf-token");var d=b.accessToken,e=b.ua(),f=a.$el.data("signup-redirect"),g=a.$el.data("referrer");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"csrfToken",c,"string|goog.soy.data.SanitizedContent");
soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"facebookToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"email",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==f||f instanceof goog.soy.data.SanitizedContent||goog.isString(f),"signupRedirect",f,"null|string|undefined");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),
"referrer",g,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(f?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e':"")+(g?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(c)+
'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"facebook"\x3e\x3cinput name\x3d"facebookToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else{d=a.l;if(c instanceof Aa)c=d.format("authFacebookSignInFailed");else if(c instanceof Ba)c=d.format("authTrySigningUpFirst");else throw Error("unrecognised FacebookServiceError");
Y(a,c)}})}function kb(a,b){nb(a);lb($(b.currentTarget));a.ca.pa().then(function(b){return rb(a,b)}).fail(function(b){Y(a,Ma(a.l,b))})}
function rb(a,b){a.ca.na(b).then(function(a){window.location.href=window._loginRedirect||a.redirect}).fail(function(c){if(a.mode===qb){if(!b.C)throw Error("missing refreshToken");c=a.$el.data("csrf-token");var d=b.C,e=b.accessToken,f=b.email,g=a.$el.data("signup-redirect"),h=a.$el.data("referrer");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"csrfToken",c,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,
"googleAccessToken",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"googleRefreshToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(f)||f instanceof goog.soy.data.SanitizedContent,"email",f,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),"signupRedirect",g,"null|string|undefined");soy.asserts.assertType(null==
h||h instanceof goog.soy.data.SanitizedContent||goog.isString(h),"referrer",h,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(g?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+(h?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(h)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+
soy.$$escapeHtmlAttribute(c)+'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"google"\x3e\x3cinput name\x3d"googleAccessToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3cinput name\x3d"googleRefreshToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else Y(a,Ma(a.l,c))})}
function Y(a,b){a.$(".js-socialAuth__error").text(b).addClass("socialAuth__error--show");mb(a.$(".js-socialAuth__facebookButton"));mb(a.$(".js-socialAuth__googleButton"))}function nb(a){a.$(".js-socialLogin__error").removeClass("socialAuth__error--show")}var qb="loginAndSignup";$(function(){if(!window.cmsg)throw Error("window['cmsg'] isn't defined");var a=new ja;(new eb({ka:fa})).start();var b=new K(window.httpServiceConfig),c=wa(),d=null;try{if(window.localStorage)d=new M(window.localStorage,void 0);else throw Error("ClientStore: localStorage is not defined on window, likely an unsupported browser");}catch(f){}var e=new S({R:new La,G:b}),b=new Ra({R:cb(),G:b,O:d});a.l||(a.l=new ka(a.R));(new ib({el:".js-header__socialAuth",Y:e,ca:b,l:a.l,mode:"login"})).start();(function(){function a(){$(".js-form__input").each(function(a,
c){return b(c)})}function b(a){a=$(a);a.toggleClass("form__input--dirty",!_.isEmpty(a.val()))}$(document).on("forceDirtyInputCheck",a);$(".js-form__input").blur(function(a){return b(a.currentTarget)});a()})();(function(){$(".js-languageSelector__link[data-locale\x3den]").click(function(){var a=moment().add(30,"days").toDate().toUTCString();document.cookie="CL\x3den; expires\x3d"+a+"; path\x3d/"})})();(function(){$(".js-header__form__submitButton").click(function(){c.track("login_submitted",{location:"logged_out_homepage",
section:"header",subsection:"login_bar",type:"email"})});$(".js-header__form__forgotPassword").click(function(){F(c,"forgot_password")});$(".header__form .js-socialAuth__facebookButton").click(function(){F(c,"login",{auth_mode:"facebook"})});$(".header__form .js-socialAuth__googleButton").click(function(){F(c,"login",{auth_mode:"google"})});"/"===window.location.pathname&&c.track("homepage_visit")})();"/"===window.location.pathname&&!$(".signupForm__emailForm").is(":visible")&&$(".header__form__input[name\x3demail]").focus()});})();